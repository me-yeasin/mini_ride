# Mini Ride - Render Deployment Guide

## Prerequisites

1. A GitHub account
2. A Render account (sign up at https://render.com)
3. MongoDB Atlas account (you already have this configured)
4. Gmail account with App Password for email functionality

## Deployment Steps

### 1. Push Your Code to GitHub

If you haven't already, create a new GitHub repository and push your code:

```bash
git init
git add .
git commit -m "Initial commit - Ready for deployment"
git branch -M main
git remote add origin <your-github-repo-url>
git push -u origin main
```

**Important:** Create a `.gitignore` file to exclude sensitive files:

```
.env
__pycache__/
*.pyc
*.pyo
*.pyd
.Python
*.so
.venv
venv/
```

### 2. Deploy on Render

#### Option A: Using render.yaml (Recommended - One-Click Deploy)

1. Go to https://render.com/dashboard
2. Click "New +" â†’ "Blueprint"
3. Connect your GitHub repository
4. Render will automatically detect `render.yaml` and configure your service
5. Set the required environment variables (see section below)
6. Click "Apply" to deploy

#### Option B: Manual Setup

1. Go to https://render.com/dashboard
2. Click "New +" â†’ "Web Service"
3. Connect your GitHub repository
4. Configure the service:
   - **Name:** mini-ride
   - **Region:** Singapore (or your preferred region)
   - **Branch:** main
   - **Runtime:** Python 3
   - **Build Command:** `pip install -r requirements.txt`
   - **Start Command:** `gunicorn app:app`
5. Set environment variables (see section below)
6. Click "Create Web Service"

### 3. Configure Environment Variables

In Render dashboard, add these environment variables:

| Key                   | Value                                                                                                                                      | Notes                                |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------ |
| `SECRET_KEY`          | (auto-generated by Render)                                                                                                                 | Or use your own secure random string |
| `MONGO_URI`           | `mongodb+srv://brandtizestudio:zxcvbnm123@brandtizecloud.g75wkgy.mongodb.net/mini-ride?retryWrites=true&w=majority&appName=BrandtizeCloud` | Your MongoDB connection string       |
| `MAIL_SERVER`         | `smtp.gmail.com`                                                                                                                           | Gmail SMTP server                    |
| `MAIL_PORT`           | `587`                                                                                                                                      | SMTP port                            |
| `MAIL_USE_TLS`        | `true`                                                                                                                                     | Enable TLS                           |
| `MAIL_USERNAME`       | `hey.yeasinarafat@gmail.com`                                                                                                               | Your Gmail address                   |
| `MAIL_PASSWORD`       | `ikwk eeis kteo zloj`                                                                                                                      | Your Gmail App Password              |
| `MAIL_DEFAULT_SENDER` | `Mini Ride <hey.yeasinarafat@gmail.com>`                                                                                                   | Default sender email                 |
| `PYTHON_VERSION`      | `3.11.0`                                                                                                                                   | Python version                       |

**Security Note:** Never commit `.env` file to GitHub. Environment variables should only be set in Render's dashboard.

### 4. MongoDB Atlas Setup

1. Log in to MongoDB Atlas (https://cloud.mongodb.com)
2. Go to "Network Access" â†’ "IP Whitelist"
3. Add `0.0.0.0/0` to allow connections from Render (or add Render's specific IPs)
4. Ensure your database user has proper permissions

### 5. Verify Deployment

1. Wait for Render to complete the build (usually 2-5 minutes)
2. Once deployed, Render will provide a URL like: `https://mini-ride.onrender.com`
3. Visit the URL to verify your application is running
4. Test key features:
   - User registration
   - Login
   - Ride requests
   - Email notifications

## Troubleshooting

### Build Fails

- Check the build logs in Render dashboard
- Verify `requirements.txt` has all dependencies
- Ensure Python version is compatible

### Application Crashes

- Check application logs in Render dashboard
- Verify all environment variables are set correctly
- Check MongoDB connection string is correct

### Email Not Sending

- Verify Gmail App Password is correct (not your regular password)
- Check that "Less secure app access" is enabled in Gmail settings
- Or use a dedicated SMTP service like SendGrid

### Database Connection Issues

- Verify MongoDB Atlas IP whitelist includes Render's IPs or `0.0.0.0/0`
- Check that MONGO_URI is correct and includes the database name

## Free Tier Limitations

Render's free tier includes:

- 750 hours/month (enough for one service running 24/7)
- Services spin down after 15 minutes of inactivity
- First request after spin-down may take 30-60 seconds

## Monitoring

- Access logs via Render dashboard â†’ Your Service â†’ Logs
- Set up health checks in Render settings
- Monitor MongoDB usage in Atlas dashboard

## Updating Your Application

1. Push changes to GitHub:

   ```bash
   git add .
   git commit -m "Your update message"
   git push origin main
   ```

2. Render will automatically detect changes and redeploy

## Custom Domain (Optional)

1. Go to your service in Render dashboard
2. Click "Settings" â†’ "Custom Domain"
3. Follow instructions to add your domain
4. Update DNS records as instructed

## Support

- Render Documentation: https://render.com/docs
- MongoDB Atlas Docs: https://docs.atlas.mongodb.com
- Flask Documentation: https://flask.palletsprojects.com

---

**Your application is now ready to deploy! ðŸš€**
